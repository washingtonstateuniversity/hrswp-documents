!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.lodash}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var c=typeof r;if("string"===c||"number"===c)e.push(r);else if(Array.isArray(r)&&r.length){var i=o.apply(null,r);i&&e.push(i)}else if("object"===c)for(var a in r)n.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e){e.exports=JSON.parse('{"name":"hrswp/document-select","category":"media","supports":{"inserter":false,"reusable":false,"html":false},"attributes":{"useExternalFile":{"type":"boolean","default":false}}}')},function(e,t,n){var r=n(18),o=n(19),c=n(14),i=n(20);e.exports=function(e,t){return r(e)||o(e,t)||c(e,t)||i()}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(24);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(25),o=n(4);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},function(e){e.exports=JSON.parse('{"name":"hrswp/documents-list","category":"media","supports":{"align":true,"html":false}}')},function(e,t,n){var r=n(15);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){var r=n(21),o=n(22),c=n(14),i=n(23);e.exports=function(e){return r(e)||o(e)||c(e)||i()}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,c=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,c=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw c}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var r=n(15);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"name",(function(){return be})),n.d(r,"settings",(function(){return ye}));var o={};n.r(o),n.d(o,"metadata",(function(){return nt})),n.d(o,"name",(function(){return ot})),n.d(o,"settings",(function(){return at}));var c=n(8),i=n.n(c),a=n(3),l=n.n(a),s=n(16),u=n.n(s),m=n(17),p=n.n(m),d=n(9),f=n.n(d),b=n(10),h=n.n(b),g=n(11),y=n.n(g),O=n(12),v=n.n(O),j=n(6),w=n.n(j),E=n(0),x=n(1),_=n(5),S=n.n(_),C=n(2),k=Object(E.createElement)(C.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},Object(E.createElement)(C.Path,{d:"M19 18V2c0-.55-.45-1-1-1H2c-.55 0-1 .45-1 1v16c0 .55.45 1 1 1h16c.55 0 1-.45 1-1zM4 3c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm13 0v6H6V3h11zM4 11c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm13 0v6H6v-6h11z"})),D=Object(E.createElement)(C.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Object(E.createElement)(C.Path,{d:"M2 1h16c.55 0 1 .45 1 1v16c0 .55-.45 1-1 1H2c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1zm7.01 7.99v-6H3v6h6.01zm8 0v-6h-6v6h6zm-8 8.01v-6H3v6h6.01zm8 0v-6h-6v6h6z"})),z=Object(E.createElement)(C.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},Object(E.createElement)(C.Path,{d:"M10.44 3.02l1.82-1.82 6.36 6.35-1.83 1.82c-1.05-.68-2.48-.57-3.41.36l-.75.75c-.92.93-1.04 2.35-.35 3.41l-1.83 1.82-2.41-2.41-2.8 2.79c-.42.42-3.38 2.71-3.8 2.29s1.86-3.39 2.28-3.81l2.79-2.79L4.1 9.36l1.83-1.82c1.05.69 2.48.57 3.4-.36l.75-.75c.93-.92 1.05-2.35.36-3.41z"})),P=Object(E.createElement)(C.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},Object(E.createElement)(C.Path,{d:"M2 19h16c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1H2c-.55 0-1 .45-1 1v16c0 .55.45 1 1 1zM4 3c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm13 0v2H6V3h11zM4 7c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm13 0v2H6V7h11zM4 11c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm13 0v2H6v-2h11zM4 15c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm13 0v2H6v-2h11z"})),I=wp.element.Fragment,M=function(e){var t=e.terms,n=e.taxonomySlug,r=e.post,o=e.prefix,c=r["category"===n||"post_tag"===n?"category"===n?"categories":"tags":n];if(!(Array.isArray(c)&&c.length))return null;var i=Object(x.filter)(t[n],(function(e){return Object(x.includes)(c,e.id)}));return Object(E.createElement)("p",{className:"wp-block-hrswp-documents-list--".concat(n,"-list")},Object(E.createElement)("span",null,o),i.map((function(e,t){var n=t>0?", ":"";return Object(E.createElement)(I,{key:t},n,Object(E.createElement)("a",{href:e.link,target:"_blank",rel:"noreferrer noopener"},e.name))})))},T=wp.i18n.__,L=wp.date,A=L.dateI18n,N=L.format,U=L.__experimentalGetSettings,F=function(e){var t=e.displayDocumentCategory,n=e.displayDocumentDate,r=e.displayDocumentTag,o=e.displayDocumentTaxonomy,c=e.post,i=e.taxonomies,a=e.termLists,l=U().formats.date,s=t||r||o;return s&&i&&i.push(i.splice(i.findIndex((function(e){return"post_tag"===e.slug})),1)[0]),Object(E.createElement)("div",{className:"wp-block-hrswp-documents-list--meta"},s&&i.map((function(e){var n;if("category"===e.slug){if(!t)return null;n=T("More from: ")}else if("post_tag"===e.slug){if(!r)return null;n="Tagged: "}else{if(!o)return null;n="".concat(e.labels.singular_name,": ")}return Object(E.createElement)(M,{key:e.slug,post:c,terms:a,taxonomySlug:e.slug,prefix:n})})),n&&c.date_gmt&&Object(E.createElement)("p",{className:"wp-block-hrswp-documents-list--post-date"},Object(E.createElement)("time",{dateTime:N("c",c.date_gmt)},A(l,c.date_gmt))))},H={per_page:-1};function R(e,t){return e?e[t]&&e[t].length>0?e[t].map((function(e){return e.id})):[]:null}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var o=w()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v()(this,n)}}var W=wp.element,J=W.Component,q=W.RawHTML,Q=wp.components,Y=Q.BaseControl,$=Q.CheckboxControl,K=Q.PanelBody,X=Q.Placeholder,Z=Q.QueryControls,ee=Q.RangeControl,te=Q.Spinner,ne=Q.ToggleControl,re=Q.ToolbarGroup,oe=wp.i18n.__,ce=wp.blockEditor,ie=ce.InspectorControls,ae=ce.BlockAlignmentToolbar,le=ce.BlockControls,se=ce.__experimentalImageSizeControl,ue=wp.data.withSelect,me=function(e){y()(n,e);var t=G(n);function n(){return f()(this,n),t.apply(this,arguments)}return h()(n,[{key:"toggleSelectedTerms",value:function(e,t){var n=this.props,r=n.attributes,o=n.setAttributes,c=r.selectedTermLists,i=Object(x.isUndefined)(c)?{}:c,a=Object(x.isUndefined)(i[e])?i[e]=[]:i[e],l=Object(x.includes)(R(i,e),t.id)?Object(x.remove)(a,(function(e){return e.id!==t.id})):[].concat(p()(a),[t]);i[e]=l,o({selectedTermLists:i})}},{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,r=t.setAttributes,o=t.className,c=t.imageSizeOptions,i=t.documentsList,a=t.taxonomies,s=t.termLists,m=t.defaultImageWidth,p=t.defaultImageHeight,d=n.displayFeaturedImage,f=n.displayDocumentExcerpt,b=n.displayDocumentDate,h=n.displayDocumentCategory,g=n.displayDocumentTag,y=n.displayDocumentTaxonomy,O=n.documentLayout,v=n.columns,j=n.order,w=n.orderBy,_=n.selectedTermLists,C=n.documentsToShow,k=n.excerptLength,I=n.featuredImageAlign,M=n.featuredImageSizeSlug,T=n.featuredImageSizeWidth,L=n.featuredImageSizeHeight;M||r({featuredImageSizeSlug:"thumbnail"});var A=Object(E.createElement)(ie,null,Object(E.createElement)(K,{title:oe("Excerpt settings")},Object(E.createElement)(ne,{label:oe("Display excerpt"),checked:f,onChange:function(e){return r({displayDocumentExcerpt:e})}}),f&&Object(E.createElement)(ee,{label:oe("Max number of words in excerpt"),value:k,onChange:function(e){return r({excerptLength:e})},min:10,max:100})),Object(E.createElement)(K,{title:oe("Document meta settings")},Object(E.createElement)(ne,{label:oe("Display document date"),checked:b,onChange:function(e){return r({displayDocumentDate:e})}}),Object(E.createElement)(ne,{label:oe("Display document category"),checked:h,onChange:function(e){return r({displayDocumentCategory:e})}}),Object(E.createElement)(ne,{label:oe("Display document tag"),checked:g,onChange:function(e){return r({displayDocumentTag:e})}}),Object(E.createElement)(ne,{label:oe("Display document taxonomy"),checked:y,onChange:function(e){return r({displayDocumentTaxonomy:e})}})),Object(E.createElement)(K,{title:oe("Document image settings")},Object(E.createElement)(ne,{label:oe("Display document image"),checked:d,onChange:function(e){return r({displayFeaturedImage:e})}}),d&&Object(E.createElement)(E.Fragment,null,Object(E.createElement)(se,{onChange:function(e){var t={};e.hasOwnProperty("width")&&(t.featuredImageSizeWidth=e.width),e.hasOwnProperty("height")&&(t.featuredImageSizeHeight=e.height),r(t)},slug:M,width:T,height:L,imageWidth:m,imageHeight:p,imageSizeOptions:c,onChangeImage:function(e){return r({featuredImageSizeSlug:e,featuredImageSizeWidth:void 0,featuredImageSizeHeight:void 0})}}),Object(E.createElement)(Y,{className:"block-editor-image-alignment-control__row"},Object(E.createElement)(Y.VisualLabel,null,oe("Image alignment")),Object(E.createElement)(ae,{value:I,onChange:function(e){return r({featuredImageAlign:e})},controls:["left","center","right"],isCollapsed:!1})))),Object(E.createElement)(K,{className:"".concat(o," taxonomy-filter"),title:oe("Filtering"),initialOpen:!1},a.map((function(t){return Object(E.createElement)(K,{className:"taxonomy-filter--body",key:t.slug,title:t.name,initialOpen:!1},Object(E.createElement)("ul",{className:"edit__checklist"},s[t.slug]&&s[t.slug].map((function(n){return Object(E.createElement)("li",{key:n.id,className:"components-checkbox-control__label"},Object(E.createElement)($,{label:n.name,checked:Object(x.includes)(R(_,t.rest_base),n.id),onChange:function(){e.toggleSelectedTerms(t.rest_base,n)}}))}))))}))),Object(E.createElement)(K,{title:oe("Order and number"),initialOpen:!1},Object(E.createElement)(Z,u()({order:j,orderBy:w},{numberOfItems:C,onOrderChange:function(e){return r({order:e})},onOrderByChange:function(e){return r({orderBy:e})},onNumberOfItemsChange:function(e){return r({documentsToShow:e})}})),"grid"===O&&Object(E.createElement)(ee,{label:oe("Maximum columns"),value:v,onChange:function(e){return r({columns:e})},min:2,max:N?Math.min(6,i.length):6,required:!0}))),N=Array.isArray(i)&&i.length;if(!N)return Object(E.createElement)(E.Fragment,null,A,Object(E.createElement)(X,{icon:z,label:oe("Posts")},Array.isArray(i)?oe("No posts found."):Object(E.createElement)(te,null)));var U=i.length>C?i.slice(0,C):i,H=[{icon:P,title:oe("List view"),onClick:function(){return r({documentLayout:"list"})},isActive:"list"===O},{icon:D,title:oe("Grid view"),onClick:function(){return r({documentLayout:"grid"})},isActive:"grid"===O}];return Object(E.createElement)(E.Fragment,null,A,Object(E.createElement)(le,null,Object(E.createElement)(re,{controls:H})),Object(E.createElement)("div",{className:S()(o,l()({"is-grid":"grid"===O,"has-feature-image":d,"has-date":b,"has-excerpt":f},"columns-".concat(v),"grid"===O))},U.map((function(e,t){var n,r=Object(x.invoke)(e,["title","rendered","trim"]),o=e.excerpt.rendered,c=document.createElement("div");c.innerHTML=o,o=c.textContent||c.innerText||"";var i=e.featuredImageSourceUrl,u=S()((n={"wp-block-hrswp-documents-list--featured-image":!0},l()(n,"size-".concat(M),!!M),l()(n,"align".concat(I),!!I),n)),m=b||h||g||y,p=k<o.trim().split(" ").length&&""===e.excerpt.raw?Object(E.createElement)(E.Fragment,null,o.trim().split(" ",k).join(" "),oe(" … ")):o;return Object(E.createElement)("div",{className:"wp-block-hrswp-documents-list--list-item",key:t},d&&i&&Object(E.createElement)("figure",{className:u},i&&Object(E.createElement)("img",{src:i,alt:"",style:{maxWidth:T,maxHeight:L}})),Object(E.createElement)("div",{className:"wp-block-hrswp-documents-list--body"},Object(E.createElement)("h3",{className:"wp-block-hrswp-documents-list--heading"},Object(E.createElement)("a",{href:e.link,target:"_blank",rel:"noreferrer noopener"},r?Object(E.createElement)(q,null,r):oe("(no title)"))),f&&Object(E.createElement)("p",{className:"wp-block-hrswp-documents-list--post-excerpt"},p),m&&Object(E.createElement)(F,{displayDocumentCategory:h,displayDocumentDate:b,displayDocumentTag:g,displayDocumentTaxonomy:y,post:e,taxonomies:a,termLists:s})))}))))}}]),n}(J),pe=ue((function(e,t){var n=t.attributes,r=n.featuredImageSizeSlug,o=n.documentsToShow,c=n.order,a=n.orderBy,l=n.selectedTermLists,s=e("core"),u=s.getEntityRecords,m=s.getMedia,p=s.getTaxonomies,d=(0,e("core/block-editor").getSettings)(),f=d.imageSizes,b=d.imageDimensions,h=Object(x.pickBy)({order:c,orderby:a,per_page:o},(function(e){return!Object(x.isUndefined)(e)}));Object(x.isUndefined)(l)||Object.entries(l).forEach((function(e){var t=i()(e,2),n=t[0],r=t[1];h[n]=r.map((function(e){return e.id}))}));var g=u("postType","hrswp_documents",h),y=p(H),O=Object(x.filter)(y,(function(e){return Object(x.includes)(e.types,"post")})),v={};O.forEach((function(e){var t=e.slug;Object.defineProperty(v,t,{value:u("taxonomy",t,H)})}));var j=f.filter((function(e){return"full"!==e.slug})).map((function(e){var t=e.name;return{value:e.slug,label:t}})),w=Array.isArray(g)?g.map((function(e){var t,n;return 0!==e.featured_media?t=m(e.featured_media):0!==e.meta._hrswp_document_file_id&&(t=m(e.meta._hrswp_document_file_id)),t?(n=Object(x.get)(t,["media_details","sizes",r,"source_url"],null))||(n=Object(x.get)(t,"source_url",null)):n="https://hrs.test/wp-content/plugins/hrswp-plugin-documents/build/images/document.svg",V(V({},e),{},{featuredImageSourceUrl:n})})):g;return{defaultImageWidth:Object(x.get)(b,[r,"width"],0),defaultImageHeight:Object(x.get)(b,[r,"height"],0),imageSizeOptions:j,taxonomies:O,termLists:v,documentsList:w}}))(me),de=n(13),fe=wp.i18n.__,be=de.name,he=de.category,ge=de.supports,ye={title:fe("Documents List"),icon:k,category:he,description:fe("Display a list of documents."),keywords:[fe("media"),fe("documents")],supports:ge,example:{},edit:pe},Oe=n(4),ve=n.n(Oe),je=wp.components,we=je.G,Ee=je.SVG,xe=je.Path,_e=Object(E.createElement)(Ee,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(E.createElement)(xe,{fill:"none",d:"M0 0h24v24H0V0z"}),Object(E.createElement)(we,null,Object(E.createElement)(xe,{d:"M8 16h8v2H8zM8 12h8v2H8z"}),Object(E.createElement)(xe,{d:"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"})));function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var o=w()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v()(this,n)}}var Ce=wp.blob,ke=Ce.getBlobByURL,De=Ce.isBlobURL,ze=Ce.revokeBlobURL,Pe=wp.components,Ie=Pe.Animate,Me=Pe.Button,Te=Pe.ClipboardButton,Le=Pe.Disabled,Ae=Pe.PanelBody,Ne=Pe.PanelRow,Ue=Pe.ToggleControl,Fe=Pe.withNotices,He=wp.compose.compose,Re=wp.data,Be=Re.withSelect,Ve=Re.withDispatch,Ge=wp.date.dateI18n,We=wp.blockEditor,Je=We.BlockControls,qe=We.BlockIcon,Qe=We.InspectorControls,Ye=We.MediaPlaceholder,$e=We.MediaReplaceFlow,Ke=We.URLInput,Xe=wp.element.Component,Ze=wp.i18n.__,et=function(e){y()(n,e);var t=Se(n);function n(){var e;return f()(this,n),(e=t.apply(this,arguments)).onSelectFile=e.onSelectFile.bind(ve()(e)),e.confirmCopyURL=e.confirmCopyURL.bind(ve()(e)),e.resetCopyConfirmation=e.resetCopyConfirmation.bind(ve()(e)),e.onUploadError=e.onUploadError.bind(ve()(e)),e.clearMedia=e.clearMedia.bind(ve()(e)),e.state={hasError:!1,showCopyConfirmation:!1},e}return h()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.mediaHref,r=t.mediaUpload,o=t.noticeOperations;De(n)&&(r({filesList:[ke(n)],onFileChange:function(t){var n=i()(t,1)[0];return e.onSelectFile(n)},onError:function(t){e.setState({hasError:!0}),o.createErrorNotice(t)}}),ze(n))}},{key:"componentDidUpdate",value:function(e){e.isSelected&&!this.props.isSelected&&this.setState({showCopyConfirmation:!1})}},{key:"onSelectFile",value:function(e){e&&e.url&&(this.setState({hasError:!1}),this.props.updateMeta(e.id,"_hrswp_document_file_id"),this.props.updateMeta(e.url,"_hrswp_document_file_href"))}},{key:"clearMedia",value:function(){this.setState({hasError:!1}),this.props.updateMeta(0,"_hrswp_document_file_id")}},{key:"onUploadError",value:function(e){var t=this.props.noticeOperations;t.removeAllNotices(),t.createErrorNotice(e)}},{key:"confirmCopyURL",value:function(){this.setState({showCopyConfirmation:!0})}},{key:"resetCopyConfirmation",value:function(){this.setState({showCopyConfirmation:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,r=t.className,o=t.isSelected,c=t.noticeUI,i=t.media,a=t.mediaHref,l=t.permalink,s=t.setAttributes,u=t.useFeatureImage,m=this.state,p=m.hasError,d=m.showCopyConfirmation,f=n.useExternalFile,b=i?i.media_details.sizes.medium:void 0,h=i?i.id:void 0,g=Object(E.createElement)(Qe,null,Object(E.createElement)(Ae,{title:Ze("Document source settings")},Object(E.createElement)(Ue,{label:Ze("Use external file"),checked:f,onChange:function(e){return s({useExternalFile:e})}}),!f&&Object(E.createElement)(Ne,null,Object(E.createElement)(Me,{isSecondary:!0,isSmall:!0,className:"block-library-hrswp-documents__reset-button",onClick:this.clearMedia},Ze("Clear Document")))));if(!f&&(!i||p))return Object(E.createElement)(E.Fragment,null,g,Object(E.createElement)(Ye,{icon:Object(E.createElement)(qe,{icon:_e}),labels:{title:Ze("File"),instructions:Ze("Upload a file or pick one from your media library.")},onSelect:this.onSelectFile,notices:c,onError:this.onUploadError,accept:"*"}));var y=S()(r,{"is-transient":De(a)});return Object(E.createElement)(E.Fragment,null,g,!f&&Object(E.createElement)(E.Fragment,null,Object(E.createElement)(Je,null,Object(E.createElement)($e,{mediaId:h,mediaURL:a,accept:"*",onSelect:this.onSelectFile,onError:this.onUploadError})),Object(E.createElement)(Ie,{type:De(a)?"loading":null},(function(t){var n=t.className;return Object(E.createElement)("div",{className:S()(y,n)},Object(E.createElement)(Le,null,i&&Object(E.createElement)(E.Fragment,null,Object(E.createElement)("img",{src:b.source_url,alt:"",width:b.width,height:b.height}),Object(E.createElement)("p",null,Object(E.createElement)("strong",null,Ze("File title: ")),i.title.rendered),Object(E.createElement)("p",null,Object(E.createElement)("strong",null,Ze("Uploaded: ")),Object(E.createElement)("time",{dateTime:Ge("c",i.date)},Ge("F j, Y",i.date))))),o&&Object(E.createElement)(Te,{isSecondary:!0,text:l,className:"wp-block-file__copy-url-button",onCopy:e.confirmCopyURL,onFinishCopy:e.resetCopyConfirmation,disabled:De(l)},Ze(d?"Copied!":"Copy URL")))}))),f&&Object(E.createElement)("div",{className:S()(r,"use-external-file")},Object(E.createElement)("div",{className:"components-placeholder block-editor-media-placeholder is-large"},Object(E.createElement)("div",{className:"components-placeholder__label"},Ze("File URL")),Object(E.createElement)("div",{className:"components-placeholder__instructions"},Ze("Enter the full URL of the external document.")),Object(E.createElement)(Ke,{value:a,onChange:function(t){return e.props.updateMeta(t,"_hrswp_document_file_href")}}),u&&i&&Object(E.createElement)("img",{src:b.source_url,alt:"",width:b.width,height:b.height}))))}}]),n}(Xe),tt=He([Ve((function(e){return{updateMeta:function(t,n){e("core/editor").editPost({meta:l()({},n,t)})}}})),Be((function(e){var t,n=e("core").getMedia,r=(0,e("core/block-editor").getSettings)().mediaUpload,o=e("core/editor").getEditedPostAttribute("featured_media"),c=e("core/editor").getEditedPostAttribute("meta")._hrswp_document_file_id,i=!1;return 0!==o?(t=void 0===o?void 0:n(o),i=!0):t=0===c?void 0:n(c),{media:t,permalink:e("core/editor").getPermalink(),mediaHref:e("core/editor").getEditedPostAttribute("meta")._hrswp_document_file_href,mediaUpload:r,useFeatureImage:i}})),Fe])(et),nt=n(7),rt=wp.i18n.__,ot=nt.name,ct=nt.attributes,it=nt.supports,at={title:rt("Document Select"),description:rt("Select or upload a file."),icon:_e,keywords:[rt("document"),rt("pdf"),rt("upload")],attributes:ct,supports:it,edit:tt},lt=wp.blocks.registerBlockType;[r,o].forEach((function(e){if(e){var t=e.settings,n=e.name;lt(n,t)}}))}]);